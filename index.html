<!doctype html>
<html lang="en">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Digital Celebration Card</title>
  <script src="/_sdk/element_sdk.js"></script>
  <style>
        body {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            height: 100%;
            font-family: 'Georgia', serif;
            overflow: hidden;
            cursor: pointer;
            user-select: none;
        }

        html {
            height: 100%;
        }

        .card-container {
            width: 100%;
            height: 100%;
            position: relative;
            background: linear-gradient(135deg, #B8E0FF 0%, #FFB8D6 100%);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            overflow: hidden;
        }

        .card-content {
            text-align: center;
            z-index: 10;
            position: relative;
            padding: 2rem;
            max-width: 600px;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            border: 2px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease;
        }

        .card-content:hover {
            transform: scale(1.05);
        }

        .celebration-type {
            font-size: 1.2rem;
            color: #4A5568;
            margin-bottom: 0.5rem;
            font-weight: 300;
            letter-spacing: 2px;
            text-transform: uppercase;
        }

        .recipient-name {
            font-size: 3.5rem;
            font-weight: bold;
            color: #2D3748;
            margin: 1rem 0;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
            animation: glow 2s ease-in-out infinite alternate;
        }

        .main-message {
            font-size: 1.5rem;
            color: #4A5568;
            margin: 1.5rem 0;
            font-style: italic;
            line-height: 1.4;
        }

        .sender-name {
            font-size: 1rem;
            color: #718096;
            margin-top: 2rem;
            font-weight: 300;
        }

        @keyframes glow {
            from { text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1); }
            to { text-shadow: 2px 2px 20px rgba(255, 182, 193, 0.6); }
        }

        .confetti {
            position: absolute;
            width: 10px;
            height: 10px;
            background: #FFD700;
            animation: confetti-fall 3s linear infinite;
            opacity: 0;
        }

        .confetti:nth-child(odd) {
            background: #FF69B4;
            width: 8px;
            height: 8px;
            animation-duration: 2.5s;
        }

        .confetti:nth-child(3n) {
            background: #87CEEB;
            width: 6px;
            height: 6px;
            animation-duration: 3.5s;
        }

        .confetti:nth-child(4n) {
            background: #98FB98;
            width: 12px;
            height: 4px;
            border-radius: 2px;
        }

        @keyframes confetti-fall {
            0% {
                transform: translateY(-100vh) rotate(0deg);
                opacity: 1;
            }
            100% {
                transform: translateY(100vh) rotate(720deg);
                opacity: 0;
            }
        }

        .sparkle {
            position: absolute;
            width: 4px;
            height: 4px;
            background: white;
            border-radius: 50%;
            animation: sparkle 1.5s ease-in-out infinite;
            opacity: 0;
        }

        @keyframes sparkle {
            0%, 100% { opacity: 0; transform: scale(0); }
            50% { opacity: 1; transform: scale(1); }
        }

        .click-hint {
            position: absolute;
            bottom: 2rem;
            left: 50%;
            transform: translateX(-50%);
            color: rgba(255, 255, 255, 0.8);
            font-size: 0.9rem;
            animation: pulse 2s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 0.6; }
            50% { opacity: 1; }
        }

        .heart {
            position: absolute;
            color: #FF69B4;
            font-size: 1.5rem;
            animation: float-up 2s ease-out forwards;
            opacity: 0;
            pointer-events: none;
        }

        @keyframes float-up {
            0% {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
            100% {
                opacity: 0;
                transform: translateY(-100px) scale(1.5);
            }
        }

        .mute-button {
            position: absolute;
            top: 2rem;
            right: 2rem;
            background: rgba(255, 255, 255, 0.2);
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 1.2rem;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
        }

        .mute-button:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: scale(1.1);
        }

        .photo-placeholder {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            width: 120px;
            height: 150px;
            background: rgba(255, 255, 255, 0.1);
            border: 2px dashed rgba(255, 255, 255, 0.4);
            border-radius: 15px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            color: rgba(255, 255, 255, 0.7);
            font-size: 0.8rem;
            text-align: center;
            backdrop-filter: blur(5px);
            transition: all 0.3s ease;
        }

        .photo-placeholder:hover {
            background: rgba(255, 255, 255, 0.2);
            border-color: rgba(255, 255, 255, 0.6);
        }

        .photo-placeholder.left {
            left: 2rem;
        }

        .photo-placeholder.right {
            right: 2rem;
        }

        .photo-placeholder .icon {
            font-size: 2rem;
            margin-bottom: 0.5rem;
        }

        .photo-image {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            width: 220px;
            height: 280px;
            border-radius: 15px;
            object-fit: cover;
            border: 3px solid rgba(255, 255, 255, 0.3);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
            transition: all 0.3s ease;
        }

        .photo-image:hover {
            transform: translateY(-50%) scale(1.05);
            border-color: rgba(255, 255, 255, 0.5);
        }

        .photo-image.left {
            left: calc(50% - 300px - 250px);
        }

        .photo-image.right {
            right: calc(50% - 300px - 250px);
        }
    </style>
  <style>@view-transition { navigation: auto; }</style>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
  <script src="https://cdn.tailwindcss.com" type="text/javascript"></script>
 </head>
 <body>
  <main class="card-container" id="cardContainer">
   <div class="card-content">
    <div class="celebration-type" id="celebrationType">
     Happy Birthday
    </div>
    <div class="recipient-name" id="recipientName">
     Emma
    </div>
    <div class="main-message" id="mainMessage">
     May this special day bring you endless joy, wonderful surprises, and all the happiness your heart can hold. Here's to another year of amazing adventures, cherished memories, and dreams coming true!
    </div>
    <div class="sender-name" id="senderName">
     With love
    </div>
   </div>
   <div class="click-hint">
    Click anywhere to celebrate!
   </div>
   <button class="mute-button" id="muteButton" title="Toggle Music">
    ðŸ”Š
   </button>
   <img src="photo1.jpg" alt="Birthday Person" class="photo-image left">
   <img src="photo2.jpg" alt="Birthday Person" class="photo-image right">
  </main>
  <script>
        const defaultConfig = {
            recipient_name: "Lyssa",
            celebration_type: "Happy Birthday",
            main_message: "May this special day bring you endless joy, wonderful surprises, and all the happiness your heart can hold. Here's to another year of amazing adventures, cherished memories, and dreams coming true!",
            sender_name: "Best wishes",
            background_color: "#B8E0FF",
            accent_color: "#FFB8D6",
            text_color: "#2D3748",
            font_family: "Georgia"
        };

        let config = { ...defaultConfig };
        let audio;
        let isPlaying = false;

        function initAudio() {
            if (!audio) {
                audio = new Audio('happybirthday.m4a');
                audio.loop = true;
                audio.volume = 0.3;
            }
        }

        function toggleMusic() {
            const button = document.getElementById('muteButton');
            
            if (!isPlaying) {
                initAudio();
                audio.play();
                isPlaying = true;
                button.textContent = 'ðŸ”Š';
            } else {
                audio.pause();
                isPlaying = false;
                button.textContent = 'ðŸ”‡';
            }
        }

        async function onConfigChange(newConfig) {
            config = { ...config, ...newConfig };
            
            // Update text content
            document.getElementById('recipientName').textContent = config.recipient_name || defaultConfig.recipient_name;
            document.getElementById('celebrationType').textContent = config.celebration_type || defaultConfig.celebration_type;
            document.getElementById('mainMessage').textContent = config.main_message || defaultConfig.main_message;
            document.getElementById('senderName').textContent = config.sender_name || defaultConfig.sender_name;
            
            // Update colors
            const backgroundColor = config.background_color || defaultConfig.background_color;
            const accentColor = config.accent_color || defaultConfig.accent_color;
            const textColor = config.text_color || defaultConfig.text_color;
            const fontFamily = config.font_family || defaultConfig.font_family;
            
            document.querySelector('.card-container').style.background = `linear-gradient(135deg, ${backgroundColor} 0%, ${accentColor} 100%)`;
            document.querySelector('.recipient-name').style.color = textColor;
            document.querySelector('.celebration-type').style.color = textColor;
            document.querySelector('.main-message').style.color = textColor;
            document.body.style.fontFamily = `${fontFamily}, serif`;
        }

        function createConfetti() {
            const colors = ['#FFD700', '#FF69B4', '#87CEEB', '#98FB98', '#FFA500', '#DA70D6'];
            
            for (let i = 0; i < 50; i++) {
                setTimeout(() => {
                    const confetti = document.createElement('div');
                    confetti.className = 'confetti';
                    confetti.style.left = Math.random() * 100 + '%';
                    confetti.style.background = colors[Math.floor(Math.random() * colors.length)];
                    confetti.style.animationDelay = Math.random() * 2 + 's';
                    document.body.appendChild(confetti);
                    
                    setTimeout(() => {
                        confetti.remove();
                    }, 4000);
                }, i * 100);
            }
        }

        function createSparkles(x, y) {
            for (let i = 0; i < 8; i++) {
                const sparkle = document.createElement('div');
                sparkle.className = 'sparkle';
                sparkle.style.left = x + (Math.random() - 0.5) * 100 + 'px';
                sparkle.style.top = y + (Math.random() - 0.5) * 100 + 'px';
                sparkle.style.animationDelay = Math.random() * 0.5 + 's';
                document.body.appendChild(sparkle);
                
                setTimeout(() => {
                    sparkle.remove();
                }, 2000);
            }
        }

        function createFloatingHeart(x, y) {
            const heart = document.createElement('div');
            heart.className = 'heart';
            heart.textContent = 'ðŸ’–';
            heart.style.left = x + 'px';
            heart.style.top = y + 'px';
            document.body.appendChild(heart);
            
            setTimeout(() => {
                heart.remove();
            }, 2000);
        }

        document.addEventListener('click', (e) => {
            // Don't trigger effects if clicking the mute button
            if (e.target.id === 'muteButton') return;
            
            createConfetti();
            createSparkles(e.clientX, e.clientY);
            createFloatingHeart(e.clientX - 10, e.clientY - 10);
        });

        // Mute button event listener
        document.getElementById('muteButton').addEventListener('click', toggleMusic);

        // Auto-start music when page loads
        window.addEventListener('load', () => {
            setTimeout(() => {
                toggleMusic();
            }, 1000);
        });

        // Initialize SDK
        if (window.elementSdk) {
            window.elementSdk.init({
                defaultConfig,
                onConfigChange,
                mapToCapabilities: (config) => ({
                    recolorables: [
                        {
                            get: () => config.background_color || defaultConfig.background_color,
                            set: (value) => {
                                config.background_color = value;
                                window.elementSdk.setConfig({ background_color: value });
                            }
                        },
                        {
                            get: () => config.accent_color || defaultConfig.accent_color,
                            set: (value) => {
                                config.accent_color = value;
                                window.elementSdk.setConfig({ accent_color: value });
                            }
                        },
                        {
                            get: () => config.text_color || defaultConfig.text_color,
                            set: (value) => {
                                config.text_color = value;
                                window.elementSdk.setConfig({ text_color: value });
                            }
                        }
                    ],
                    borderables: [],
                    fontEditable: {
                        get: () => config.font_family || defaultConfig.font_family,
                        set: (value) => {
                            config.font_family = value;
                            window.elementSdk.setConfig({ font_family: value });
                        }
                    },
                    fontSizeable: undefined
                }),
                mapToEditPanelValues: (config) => new Map([
                    ["recipient_name", config.recipient_name || defaultConfig.recipient_name],
                    ["celebration_type", config.celebration_type || defaultConfig.celebration_type],
                    ["main_message", config.main_message || defaultConfig.main_message],
                    ["sender_name", config.sender_name || defaultConfig.sender_name]
                ])
            });
        }

        // Initial render
        onConfigChange(defaultConfig);
    </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9952089ce19a1e93',t:'MTc2MTU2NjQzMy4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
